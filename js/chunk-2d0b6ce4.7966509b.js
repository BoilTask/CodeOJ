(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b6ce4"],{"1f70":function(a,e,t){"use strict";t.r(e);var r=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("Content",{staticStyle:{padding:"15px"}},[t("Card",[t("Form",{ref:"formValidate",attrs:{model:a.formValidate,rules:a.ruleValidate,"label-width":80}},[t("FormItem",{attrs:{label:"用户名",prop:"user_id"}},[t("Input",{attrs:{placeholder:"userid",disabled:""},model:{value:a.formValidate.user_id,callback:function(e){a.$set(a.formValidate,"user_id",e)},expression:"formValidate.user_id"}})],1),t("FormItem",{attrs:{label:"原密码",prop:"old_password"}},[t("Input",{attrs:{type:"password",placeholder:"oldpassword"},model:{value:a.formValidate.old_password,callback:function(e){a.$set(a.formValidate,"old_password",e)},expression:"formValidate.old_password"}})],1),t("FormItem",{attrs:{label:"新密码",prop:"new_password"}},[t("Input",{attrs:{type:"password",placeholder:"newpassword"},model:{value:a.formValidate.new_password,callback:function(e){a.$set(a.formValidate,"new_password",e)},expression:"formValidate.new_password"}})],1),t("FormItem",{attrs:{label:"请确认",prop:"repeat_password"}},[t("Input",{attrs:{type:"password",placeholder:"repeatpassword"},model:{value:a.formValidate.repeat_password,callback:function(e){a.$set(a.formValidate,"repeat_password",e)},expression:"formValidate.repeat_password"}})],1),t("FormItem",{attrs:{label:"昵称",prop:"nickname"}},[t("Input",{attrs:{placeholder:"nickname"},model:{value:a.formValidate.nickname,callback:function(e){a.$set(a.formValidate,"nickname",e)},expression:"formValidate.nickname"}})],1),t("FormItem",{attrs:{label:"邮箱",prop:"email"}},[t("Input",{attrs:{placeholder:"email"},model:{value:a.formValidate.email,callback:function(e){a.$set(a.formValidate,"email",e)},expression:"formValidate.email"}},[1==a.formValidate.email_flag?t("span",{staticStyle:{color:"#19be6b"},attrs:{slot:"append"},slot:"append"},[a._v("原邮箱是否验证：\n\t\t\t\t\t"),t("Icon",{attrs:{type:"md-checkmark-circle"}})],1):t("span",{staticStyle:{color:"#ed4014"},attrs:{slot:"append"},slot:"append"},[a._v("原邮箱是否验证：\n\t\t\t\t\t"),t("Icon",{attrs:{type:"md-close-circle"}})],1)]),t("p",[t("Icon",{attrs:{type:"md-attach"}}),a._v("修改后请点击右侧 "),t("Tag",{attrs:{color:"blue"}},[a._v("更新信息")]),a._v(" 进行邮箱验证")],1)],1),t("FormItem",{attrs:{label:"组织",prop:"organization"}},[t("Input",{attrs:{placeholder:"organization"},model:{value:a.formValidate.organization,callback:function(e){a.$set(a.formValidate,"organization",e)},expression:"formValidate.organization"}})],1),t("FormItem",[t("Button",{attrs:{type:"primary"},on:{click:function(e){return a.handleSubmit("formValidate")}}},[a._v("提交")])],1)],1)],1)],1)},s=[],o=(t("6b54"),t("386d"),{name:"ManageUser",data(){const a=(a,e,t)=>{if(e.length<6)t(new Error("请检查输入！"));else{var r=new URLSearchParams;r.append("user_id",this.$store.state.loginInfo.user_id),r.append("password",e),axios.post(this.$store.state.API_ROOT+"user/check",r).then(a=>{this.$Spin.hide(),a.data.data.is_ok?t():t(new Error("原密码不符！"))}).catch(function(a){t(new Error("服务器连接失败！"))})}},e=(a,e,t)=>{""!==this.formValidate.new_password&&""===e?t(new Error("请再次输入新密码！")):e!==this.formValidate.new_password?t(new Error("两次密码输入不一致！")):t()},t=(a,e,t)=>{var r=e.search(/.+@.+\..+/);r<0?t(new Error("请输入正确的邮箱格式！")):t()};return{formValidate:{user_id:"",old_password:"",new_password:"",repeat_password:"",nickname:"",email:"",email_flag:0,organization:""},ruleValidate:{user_id:[{required:!0,message:"用户名不能为空！",trigger:"blur"}],old_password:[{required:!0,validator:a,trigger:"blur"}],new_password:[{required:!1,message:"密码为6位到20位字符！",min:6,max:20,trigger:"blur"}],repeat_password:[{validator:e,trigger:"blur"}],nickname:[{required:!0,message:"昵称为1~20位！",min:1,max:20,trigger:"blur"}],email:[{required:!0,validator:t,trigger:"blur"}]}}},mounted(){var a=new URLSearchParams;this.$store.state.loginInfo.isLogin&&(a.append("user_id",this.$store.state.loginInfo.user_id),a.append("token",this.$store.state.loginInfo.token)),axios.get(this.$store.state.API_ROOT+"user/"+this.$store.state.loginInfo.user_id+"/info?"+a.toString()).then(a=>{this.formValidate.user_id=a.data.data.user_id,this.formValidate.nickname=a.data.data.nickname,this.formValidate.email=a.data.data.email,this.formValidate.email_flag=a.data.data.email_flag,this.formValidate.organization=a.data.data.organization}).catch(function(a){console.log(a)})},methods:{handleSubmit(a){this.$refs[a].validate(a=>{if(a){this.$Spin.show();var e=new URLSearchParams;e.append("user_id",this.$store.state.loginInfo.user_id),e.append("token",this.$store.state.loginInfo.token),e.append("old_password",this.formValidate.old_password),""!==this.formValidate.new_password&&(e.append("new_password",this.formValidate.new_password),e.append("repeat_password",this.formValidate.repeat_password)),e.append("nickname",this.formValidate.nickname),e.append("email",this.formValidate.email),e.append("organization",this.formValidate.organization),axios.post(this.$store.state.API_ROOT+"user/"+this.formValidate.user_id+"/edit",e).then(a=>{this.$Spin.hide(),a.data.data.is_ok?this.$Message.success("修改成功！"):this.$Message.error("修改失败！")}).catch(function(a){this.$Spin.hide(),this.$Message.error("修改失败！")})}else this.$Message.error("请检查输入!")})}}}),i=o,l=t("2877"),d=Object(l["a"])(i,r,s,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0b6ce4.7966509b.js.map