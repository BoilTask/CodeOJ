{"version":3,"sources":["webpack:///./src/views/Manage/ManageUserInfo.vue?4ee4","webpack:///src/views/Manage/ManageUserInfo.vue","webpack:///./src/views/Manage/ManageUserInfo.vue?175c","webpack:///./src/views/Manage/ManageUserInfo.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","padding","attrs","slot","_v","text-align","span","color","_s","email","current","email_step","status","email_status","size","title","email_flag","disabled","placeholder","model","value","callback","$$v","email_key","expression","appid","on","sendEmailKey","click","verifyEmailKey","staticRenderFns","ManageUserInfovue_type_script_lang_js_","name","data","mounted","_this","axios","get","$store","state","API_ROOT","loginInfo","user_id","then","response","catch","error","console","log","methods","ticket","_this2","ret","$Message","info","params","URLSearchParams","append","token","randstr","post","is_ok","success","_this3","length","$Spin","hide","$router","go","Manage_ManageUserInfovue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d0e13d1.f095a47c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Content',{staticStyle:{\"padding\":\"15px\"}},[_c('Card',[_c('p',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"邮箱验证\")]),_c('Row',{staticStyle:{\"text-align\":\"center\"}},[_c('Col',{attrs:{\"span\":\"8\"}},[_c('span',[_vm._v(\"您的邮箱：\"),_c('Tag',{attrs:{\"color\":\"blue\"}},[_vm._v(_vm._s(_vm.email))])],1),_c('Steps',{attrs:{\"current\":_vm.email_step,\"status\":_vm.email_status,\"size\":\"small\"}},[_c('Step',{attrs:{\"title\":\"发送\"}}),_c('Step',{attrs:{\"title\":\"验证\"}}),_c('Step',{attrs:{\"title\":\"成功\"}})],1)],1),_c('Col',{attrs:{\"span\":\"16\"}},[(_vm.email_flag==1)?_c('Button',{attrs:{\"disabled\":\"\"}},[_vm._v(\"验证完成\")]):_c('span',[_c('Input',{attrs:{\"placeholder\":\"验证码区分大小写\"},model:{value:(_vm.email_key),callback:function ($$v) {_vm.email_key=$$v},expression:\"email_key\"}},[_c('Button',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_c('vueTencentCaptcha',{attrs:{\"appid\":\"2081307488\"},on:{\"callback\":_vm.sendEmailKey}},[_vm._v(\"发送验证码\")])],1),_c('Button',{attrs:{\"slot\":\"append\"},on:{\"click\":_vm.verifyEmailKey},slot:\"append\"},[_vm._v(\"点击验证\")])],1)],1)],1)],1),_c('p')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<Content style=\"padding: 15px;\">\r\n\t\t<Card>\r\n\t\t\t<p slot=\"title\">邮箱验证</p>\r\n\t\t\t<Row style=\"text-align: center;\">\r\n\t\t\t\t<Col span=\"8\">\r\n\t\t\t\t<span>您的邮箱：<Tag color=\"blue\">{{email}}</Tag></span>\r\n\t\t\t\t<Steps :current=\"email_step\" :status=\"email_status\" size=\"small\">\r\n\t\t\t\t\t<Step title=\"发送\"></Step>\r\n\t\t\t\t\t<Step title=\"验证\"></Step>\r\n\t\t\t\t\t<Step title=\"成功\"></Step>\r\n\t\t\t\t</Steps>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col span=\"16\">\r\n\t\t\t\t<Button v-if=\"email_flag==1\" disabled>验证完成</Button>\r\n\t\t\t\t<span v-else><Input v-model=\"email_key\" placeholder=\"验证码区分大小写\">\r\n\t\t\t\t\t<Button slot=\"prepend\">\r\n\t\t\t\t\t\t<vueTencentCaptcha appid=\"2081307488\" @callback=\"sendEmailKey\">发送验证码</vueTencentCaptcha>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button slot=\"append\" v-on:click=\"verifyEmailKey\">点击验证</Button></Input></span>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t\t</p>\r\n\t\t</Card>\r\n\t</Content>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tname: 'ManageUserInfo',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\temail: '',\r\n\t\t\t\temail_flag: 0,\r\n\t\t\t\temail_step: 0,\r\n\t\t\t\temail_status: 'wait',\r\n\t\t\t\temail_key: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\taxios\r\n\t\t\t\t.get(this.$store.state.API_ROOT + 'user/' + this.$store.state.loginInfo.user_id + '/email')\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\tthis.email = response.data.data.email\r\n\t\t\t\t\tthis.email_flag = response.data.data.email_flag\r\n\t\t\t\t\tif (this.email_flag == 1) {\r\n\t\t\t\t\t\tthis.email_step = 2\r\n\t\t\t\t\t\tthis.email_status = 'finish'\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(function(error) {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tsendEmailKey(ticket) {\r\n\t\t\t\tif (!ticket.ret) {\r\n\t\t\t\t\tthis.$Message.info('正在尝试发送验证码……');\r\n\t\t\t\t\tthis.email_status = 'process'\r\n\t\t\t\t\tvar params = new URLSearchParams();\r\n\t\t\t\t\tparams.append('token', this.$store.state.loginInfo.token);\r\n\t\t\t\t\tparams.append('ticket', ticket.ticket);\r\n\t\t\t\t\tparams.append('randStr', ticket.randstr);\r\n\t\t\t\t\taxios\r\n\t\t\t\t\t\t.post(this.$store.state.API_ROOT + 'user/' + this.$store.state.loginInfo.user_id + '/email/get', params)\r\n\t\t\t\t\t\t.then(response => {\r\n\t\t\t\t\t\t\tif (response.data.data.is_ok) {\r\n\t\t\t\t\t\t\t\tthis.email_step = 1\r\n\t\t\t\t\t\t\t\tthis.$Message.success('发送成功！');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.email_step = 0\r\n\t\t\t\t\t\t\t\tthis.email_status = 'error'\r\n\t\t\t\t\t\t\t\tthis.$Message.error('发送失败！');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).catch(function(error) {\r\n\t\t\t\t\t\t\tthis.email_status = 'error'\r\n\t\t\t\t\t\t\tthis.$Message.error('发送失败！');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tverifyEmailKey() {\r\n\t\t\t\tif (this.email_key.length != 6) {\r\n\t\t\t\t\tthis.$Message.error('验证码为6位字符！');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar params = new URLSearchParams();\r\n\t\t\t\t\tparams.append('token', this.$store.state.loginInfo.token);\r\n\t\t\t\t\tparams.append('email_key', this.email_key);\r\n\t\t\t\t\taxios\r\n\t\t\t\t\t\t.post(this.$store.state.API_ROOT + 'user/' + this.$store.state.loginInfo.user_id + '/email/verify', params)\r\n\t\t\t\t\t\t.then(response => {\r\n\t\t\t\t\t\t\tthis.$Spin.hide();\r\n\t\t\t\t\t\t\tif (response.data.data.is_ok) {\r\n\t\t\t\t\t\t\t\tthis.email_step = 2\r\n\t\t\t\t\t\t\t\tthis.email_status = 'finish'\r\n\t\t\t\t\t\t\t\tthis.$Message.success('验证成功！');\r\n\t\t\t\t\t\t\t\tthis.$router.go(0)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.email_step = 1\r\n\t\t\t\t\t\t\t\tthis.email_status = 'error'\r\n\t\t\t\t\t\t\t\tthis.$Message.error('验证失败，请重新发送验证码！');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).catch(function(error) {\r\n\t\t\t\t\t\t\tthis.$Spin.hide();\r\n\t\t\t\t\t\t\tthis.email_status = 'error'\r\n\t\t\t\t\t\t\tthis.$Message.error('验证失败！');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ManageUserInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ManageUserInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ManageUserInfo.vue?vue&type=template&id=72749e4a&\"\nimport script from \"./ManageUserInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./ManageUserInfo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}