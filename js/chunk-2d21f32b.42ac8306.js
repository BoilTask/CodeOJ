(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21f32b"],{d999:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Content",[a("Row",[a("Col",{attrs:{span:"16"}},[a("Content",{staticStyle:{padding:"5px"}},[a("Card",[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"标题",prop:"title"}},[a("Input",{attrs:{placeholder:"title"},model:{value:t.formValidate.title,callback:function(e){t.$set(t.formValidate,"title",e)},expression:"formValidate.title"}})],1),a("FormItem",{attrs:{label:"时间限制",prop:"time_limit"}},[a("Input",{attrs:{placeholder:"time_limit"},model:{value:t.formValidate.time_limit,callback:function(e){t.$set(t.formValidate,"time_limit",e)},expression:"formValidate.time_limit"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("S")])])],1),a("FormItem",{attrs:{label:"内存限制",prop:"memory_limit"}},[a("Input",{attrs:{placeholder:"memory_limit"},model:{value:t.formValidate.memory_limit,callback:function(e){t.$set(t.formValidate,"memory_limit",e)},expression:"formValidate.memory_limit"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("MB")])])],1),a("FormItem",{attrs:{label:"标签",prop:"tags"}},[a("Input",{attrs:{placeholder:"tags"},model:{value:t.formValidate.tags,callback:function(e){t.$set(t.formValidate,"tags",e)},expression:"formValidate.tags"}}),a("p",[a("Icon",{attrs:{type:"ios-information-circle-outline"}}),t._v("多个标签请以英文逗号“,”隔开\n\t\t\t\t\t\t")],1)],1),a("FormItem",{attrs:{label:"权限",prop:"privilege"}},[a("i-switch",{attrs:{size:"large"},model:{value:t.formValidate.privilege,callback:function(e){t.$set(t.formValidate,"privilege",e)},expression:"formValidate.privilege"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("私有")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("公开")])])],1)],1)],1)],1)],1),a("Col",{attrs:{span:"8"}},[a("Sider",{attrs:{width:"100%","hide-trigger":""}},[a("div",{staticStyle:{"background-color":"#f8f8f9",padding:"5px"}},[a("Card",{staticClass:"ProblemCard"},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("文章信息")]),a("p",{attrs:{slot:"extra"},slot:"extra"},[a("Button",{attrs:{type:"primary",loading:t.btnLoading},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("提交")]),a("Button",{attrs:{type:"error",to:"/problem/"+this.$route.params.id}},[t._v("查看")])],1),a("Table",{attrs:{columns:t.tableCol,data:t.problemData,"show-header":!1}})],1)],1)])],1)],1),a("Card",[a("mavon-editor",{ref:"editorDescription",staticStyle:{"min-height":"600px"},on:{imgAdd:t.$imgAddDescription,save:t.saveDescription},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),a("mavon-editor",{ref:"editorHint",staticStyle:{"min-height":"600px"},on:{imgAdd:t.$imgAddHint,save:t.saveHint},model:{value:t.hint,callback:function(e){t.hint=e},expression:"hint"}})],1)],1)},o=[],n=(a("7f7f"),a("6b54"),{name:"ProblemEdit",data:function(){return{btnLoading:!0,formValidate:{title:"",time_limit:"",memory_limit:"",tags:"",privilege:!1},ruleValidate:{title:[{required:!0,message:"标题不能为空！",trigger:"blur"}],time_limit:[{required:!0,message:"时间限制不能为空！",trigger:"blur"}],memory_limit:[{required:!0,message:"内存限制不能为空！",trigger:"blur"}]},description:"",hint:"",tableCol:[{key:"name"},{key:"info"}],problemData:[],uploadToken:""}},mounted:function(){var t=this,e=new URLSearchParams;this.$store.state.loginInfo.isLogin&&(e.append("user_id",this.$store.state.loginInfo.user_id),e.append("token",this.$store.state.loginInfo.token)),axios.get(this.$store.state.API_ROOT+"problem/"+this.$route.params.id+"?"+e.toString()).then(function(e){t.formValidate.title=e.data.data.problemInfo.title,t.formValidate.time_limit=e.data.data.problemInfo.problemData[1].info,t.formValidate.memory_limit=e.data.data.problemInfo.problemData[2].info,t.formValidate.privilege=1==e.data.data.problemInfo.problemData[5].info,t.description=e.data.data.problemInfo.description,t.hint=e.data.data.problemInfo.hint,t.formValidate.tags="";for(var a=e.data.data.problemInfo.problemData[0]["info"],i=0,o=a.length;i<o;i++)i>0&&(t.formValidate.tags+=","),t.formValidate.tags+=a[i]["name"];var n=Array();n[0]=e.data.data.problemInfo.problemData[6],n[1]=e.data.data.problemInfo.problemData[7],t.problemData=n,t.btnLoading=!1}).catch(function(t){console.log(t)})},methods:{saveDescription:function(){var t=this;this.$Spin.show();var e=new URLSearchParams;e.append("user_id",this.$store.state.loginInfo.user_id),e.append("token",this.$store.state.loginInfo.token),e.append("description",this.description),this.btnLoading=!0,axios.post(this.$store.state.API_ROOT+"problem/"+this.$route.params.id+"/edit",e).then(function(e){e.data.data.is_ok?(t.problemData[1]["info"]=t.$store.state.server_time,t.$Message.success("保存成功！")):t.$Message.error("保存失败！"),t.btnLoading=!1,t.$Spin.hide()}).catch(function(t){this.$Message.error("保存失败！"),this.btnLoading=!1,this.$Spin.hide()})},saveHint:function(){var t=this;this.$Spin.show();var e=new URLSearchParams;e.append("user_id",this.$store.state.loginInfo.user_id),e.append("token",this.$store.state.loginInfo.token),e.append("hint",this.hint),this.btnLoading=!0,axios.post(this.$store.state.API_ROOT+"problem/"+this.$route.params.id+"/edit",e).then(function(e){e.data.data.is_ok?(t.problemData[1]["info"]=t.$store.state.server_time,t.$Message.success("保存成功！")):t.$Message.error("保存失败！"),t.btnLoading=!1,t.$Spin.hide()}).catch(function(t){this.$Message.error("保存失败！"),this.btnLoading=!1,this.$Spin.hide()})},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(t){e.$Spin.show(),e.btnLoading=!0;var a=new URLSearchParams;a.append("user_id",e.$store.state.loginInfo.user_id),a.append("token",e.$store.state.loginInfo.token),a.append("title",e.formValidate.title),a.append("time_limit",e.formValidate.time_limit),a.append("memory_limit",e.formValidate.memory_limit),a.append("privilege",e.formValidate.privilege?1:0),a.append("tags",e.formValidate.tags),a.append("description",e.description),a.append("hint",e.hint),axios.post(e.$store.state.API_ROOT+"problem/"+e.$route.params.id+"/edit",a).then(function(t){e.$Spin.hide(),t.data.data.is_ok?(e.problemData[1]["info"]=e.$store.state.server_time,e.btnLoading=!1,e.$Message.success("保存成功！")):(e.btnLoading=!1,e.$Message.error("保存失败！"))}).catch(function(t){this.$Spin.hide(),this.btnLoading=!1,this.$Message.error("保存失败！")})}else e.$Message.error("请检查输入!")})},$imgAddDescription:function(t,e){var a=this;this.$Spin.show(),axios.get(this.$store.state.API_ROOT+"upload/token").then(function(i){a.uploadToken=i.data.data.token;var o=new URLSearchParams;o.append("token",a.uploadToken),o.append("file",e);var n=new FormData;n.append("token",a.uploadToken),n.append("file",e),axios.post("https://upload.qiniup.com",n).then(function(e){a.$refs.editorDescription.$img2Url(t,a.$store.state.CDN_ROOT+e.data.key),a.$Spin.hide(),a.$Message.success("图片上传成功！")}).catch(function(t){console.log(t)})}).catch(function(t){console.log(t)})},$imgAddHint:function(t,e){var a=this;this.$Spin.show(),axios.get(this.$store.state.API_ROOT+"upload/token").then(function(t){a.uploadToken=t.data.data.token;var i=new URLSearchParams;i.append("token",a.uploadToken),i.append("file",e);var o=new FormData;o.append("token",a.uploadToken),o.append("file",e),axios.post("https://upload.qiniup.com",o).then(function(t){a.$refs.editorHint.$img2Url(Description,a.$store.state.CDN_ROOT+t.data.key),a.$Spin.hide(),a.$Message.success("图片上传成功！")}).catch(function(t){console.log(t)})}).catch(function(t){console.log(t)})}}}),r=n,s=a("2877"),l=Object(s["a"])(r,i,o,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d21f32b.42ac8306.js.map