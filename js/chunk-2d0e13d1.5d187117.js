(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e13d1"],{"7a1b":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Content",{staticStyle:{padding:"15px"}},[s("Card",[s("p",{attrs:{slot:"title"},slot:"title"},[t._v("邮箱验证")]),s("Row",{staticStyle:{"text-align":"center"}},[s("Col",{attrs:{span:"8"}},[s("span",[t._v("您的邮箱："),s("Tag",{attrs:{color:"blue"}},[t._v(t._s(t.email))])],1),s("Steps",{attrs:{current:t.email_step,status:t.email_status,size:"small"}},[s("Step",{attrs:{title:"发送"}}),s("Step",{attrs:{title:"验证"}}),s("Step",{attrs:{title:"成功"}})],1)],1),s("Col",{attrs:{span:"16"}},[1==t.email_flag?s("Button",{attrs:{disabled:""}},[t._v("验证完成")]):s("span",[s("Input",{attrs:{placeholder:"验证码区分大小写"},model:{value:t.email_key,callback:function(e){t.email_key=e},expression:"email_key"}},[s("Button",{attrs:{slot:"prepend"},slot:"prepend"},[s("vueTencentCaptcha",{attrs:{appid:"2081307488"},on:{callback:t.sendEmailKey}},[t._v("发送验证码")])],1),s("Button",{attrs:{slot:"append"},on:{click:t.verifyEmailKey},slot:"append"},[t._v("点击验证")])],1)],1)],1)],1),s("p")],1)],1)},i=[],l={name:"ManageUserInfo",data(){return{email:"",email_flag:0,email_step:0,email_status:"wait",email_key:""}},mounted(){axios.get(this.$store.state.API_ROOT+"user/"+this.$store.state.loginInfo.user_id+"/email").then(t=>{this.email=t.data.data.email,this.email_flag=t.data.data.email_flag,1==this.email_flag&&(this.email_step=2,this.email_status="finish")}).catch(function(t){console.log(t)})},methods:{sendEmailKey(t){if(!t.ret){this.$Message.info("正在尝试发送验证码……"),this.email_status="process";var e=new URLSearchParams;e.append("token",this.$store.state.loginInfo.token),e.append("ticket",t.ticket),e.append("randStr",t.randstr),axios.post(this.$store.state.API_ROOT+"user/"+this.$store.state.loginInfo.user_id+"/email/get",e).then(t=>{t.data.data.is_ok?(this.email_step=1,this.$Message.success("发送成功！")):(this.email_step=0,this.email_status="error",this.$Message.error("发送失败！"))}).catch(function(t){this.email_status="error",this.$Message.error("发送失败！")})}},verifyEmailKey(){if(6!=this.email_key.length)this.$Message.error("验证码为6位字符！");else{var t=new URLSearchParams;t.append("token",this.$store.state.loginInfo.token),t.append("email_key",this.email_key),axios.post(this.$store.state.API_ROOT+"user/"+this.$store.state.loginInfo.user_id+"/email/verify",t).then(t=>{this.$Spin.hide(),t.data.data.is_ok?(this.email_step=2,this.email_status="finish",this.$Message.success("验证成功！"),this.$router.go(0)):(this.email_step=1,this.email_status="error",this.$Message.error("验证失败，请重新发送验证码！"))}).catch(function(t){this.$Spin.hide(),this.email_status="error",this.$Message.error("验证失败！")})}}}},r=l,n=s("2877"),o=Object(n["a"])(r,a,i,!1,null,null,null);e["default"]=o.exports}}]);
//# sourceMappingURL=chunk-2d0e13d1.5d187117.js.map