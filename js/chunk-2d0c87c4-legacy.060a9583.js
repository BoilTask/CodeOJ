(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c87c4"],{"54a0":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("Content",[e("Row",[e("Col",{attrs:{span:"16"}},[e("Content",{staticStyle:{padding:"5px"}},[e("Card",[e("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":80}},[e("FormItem",{attrs:{label:"标题",prop:"title"}},[e("Input",{attrs:{placeholder:"title"},model:{value:t.formValidate.title,callback:function(a){t.$set(t.formValidate,"title",a)},expression:"formValidate.title"}})],1),e("FormItem",{attrs:{label:"标签",prop:"tags"}},[e("Input",{attrs:{placeholder:"tags"},model:{value:t.formValidate.tags,callback:function(a){t.$set(t.formValidate,"tags",a)},expression:"formValidate.tags"}}),e("p",[e("Icon",{attrs:{type:"ios-information-circle-outline"}}),t._v("多个标签请以英文逗号“,”隔开")],1)],1)],1)],1)],1)],1),e("Col",{attrs:{span:"8"}},[e("Sider",{attrs:{width:"100%","hide-trigger":""}},[e("div",{staticStyle:{"background-color":"#f8f8f9",padding:"5px"}},[e("Card",{staticClass:"BlogCard"},[e("p",{attrs:{slot:"title"},slot:"title"},[t._v("文章信息")]),e("p",{attrs:{slot:"extra"},slot:"extra"},[e("Button",{attrs:{type:"primary"},on:{click:function(a){return t.handleSubmit("formValidate")}}},[t._v("提交")])],1),e("Table",{attrs:{columns:t.tableCol,data:t.blogData,"show-header":!1}})],1)],1)])],1)],1),e("Card",[e("mavon-editor",{staticStyle:{"min-height":"600px"},on:{save:t.saveContent},model:{value:t.content,callback:function(a){t.content=a},expression:"content"}})],1)],1)},s=[],i=(e("7f7f"),{name:"BlogEdit",data:function(){return{formValidate:{title:"",tags:""},ruleValidate:{title:[{required:!0,message:"标题不能为空！",trigger:"blur"}]},content:"",tableCol:[{key:"name"},{key:"info"}],blogData:[]}},mounted:function(){var t=this;axios.get(this.$store.state.API_ROOT+"blog/"+this.$route.params.id).then(function(a){t.formValidate.title=a.data.data.blog.title,t.content=a.data.data.blog.content;var e=Array();e[0]=a.data.data.blogData[0],e[1]=a.data.data.blogData[1],t.blogData=e;for(var o=a.data.data.blogData[2]["info"],s=0,i=o.length;s<i;s++)s>0&&(t.formValidate.tags+=","),t.formValidate.tags+=o[s]["name"]}).catch(function(t){console.log(t)})},methods:{saveContent:function(){var t=this;this.$Spin.show();var a=new URLSearchParams;a.append("user_id",this.$store.state.loginInfo.user_id),a.append("token",this.$store.state.loginInfo.token),a.append("content",this.content),axios.post(this.$store.state.API_ROOT+"blog/"+this.$route.params.id+"/edit",a).then(function(a){a.data.data.is_ok?(t.blogData[1]["info"]=t.$store.state.server_time,t.$Message.success("保存成功！")):t.$Message.error("保存失败！"),t.$Spin.hide()}).catch(function(t){this.$Message.error("保存失败！"),this.$Spin.hide()})},handleSubmit:function(t){var a=this;this.$refs[t].validate(function(t){t?(a.$Spin.show(),axios.post(a.$store.state.API_ROOT+"blog/"+a.$route.params.id+"/edit","user_id="+a.$store.state.loginInfo.user_id+"&token="+a.$store.state.loginInfo.token+"&title="+a.formValidate.title+"&tags="+a.formValidate.tags+"&content="+a.content).then(function(t){a.$Spin.hide(),t.data.data.is_ok?(a.blogData[1]["info"]=a.$store.state.server_time,a.$Message.success("保存成功！")):a.$Message.error("保存失败！")}).catch(function(t){this.$Spin.hide(),this.$Message.error("保存失败！")})):a.$Message.error("请检查输入!")})}}}),n=i,r=e("2877"),l=Object(r["a"])(n,o,s,!1,null,null,null);a["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d0c87c4-legacy.060a9583.js.map