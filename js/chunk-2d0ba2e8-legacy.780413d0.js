(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ba2e8"],{"35b2":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Content",{staticStyle:{padding:"15px"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("邮箱验证")]),a("Row",{staticStyle:{"text-align":"center"}},[a("Col",{attrs:{span:"8"}},[a("span",[t._v("您的邮箱："),a("Tag",{attrs:{color:"blue"}},[t._v(t._s(t.email))])],1),a("Steps",{attrs:{current:t.email_step,status:t.email_status,size:"small"}},[a("Step",{attrs:{title:"发送"}}),a("Step",{attrs:{title:"验证"}}),a("Step",{attrs:{title:"成功"}})],1)],1),a("Col",{attrs:{span:"16"}},[1==t.email_flag?a("Button",{attrs:{disabled:""}},[t._v("验证完成")]):a("span",[a("Input",{attrs:{placeholder:"验证码区分大小写"},model:{value:t.email_key,callback:function(e){t.email_key=e},expression:"email_key"}},[a("Button",{attrs:{slot:"prepend"},slot:"prepend"},[a("vueTencentCaptcha",{attrs:{appid:"2081307488"},on:{callback:t.sendEmailKey}},[t._v("发送验证码")])],1),a("Button",{attrs:{slot:"append"},on:{click:t.verifyEmailKey},slot:"append"},[t._v("点击验证")])],1)],1)],1)],1),a("p")],1)],1)},i=[],n={name:"ManageUserInfo",data:function(){return{email:"",email_flag:0,email_step:0,email_status:"wait",email_key:""}},mounted:function(){var t=this;axios.get(this.$store.state.API_ROOT+"user/"+this.$store.state.loginInfo.user_id+"/email").then(function(e){t.email=e.data.data.email,t.email_flag=e.data.data.email_flag,1==t.email_flag&&(t.email_step=2,t.email_status="finish")}).catch(function(t){console.log(t)})},methods:{sendEmailKey:function(t){var e=this;if(!t.ret){this.$Message.info("正在尝试发送验证码……"),this.email_status="process";var a=new URLSearchParams;a.append("token",this.$store.state.loginInfo.token),a.append("ticket",t.ticket),a.append("randStr",t.randstr),axios.post(this.$store.state.API_ROOT+"user/"+this.$store.state.loginInfo.user_id+"/email/get",a).then(function(t){t.data.data.is_ok?(e.email_step=1,e.$Message.success("发送成功！")):(e.email_step=0,e.email_status="error",e.$Message.error("发送失败！"))}).catch(function(t){this.email_status="error",this.$Message.error("发送失败！")})}},verifyEmailKey:function(){var t=this;if(6!=this.email_key.length)this.$Message.error("验证码为6位字符！");else{var e=new URLSearchParams;e.append("token",this.$store.state.loginInfo.token),e.append("email_key",this.email_key),axios.post(this.$store.state.API_ROOT+"user/"+this.$store.state.loginInfo.user_id+"/email/verify",e).then(function(e){t.$Spin.hide(),e.data.data.is_ok?(t.email_step=2,t.email_status="finish",t.$Message.success("验证成功！"),t.$router.go(0)):(t.email_step=1,t.email_status="error",t.$Message.error("验证失败，请重新发送验证码！"))}).catch(function(t){this.$Spin.hide(),this.email_status="error",this.$Message.error("验证失败！")})}}}},r=n,l=a("2877"),o=Object(l["a"])(r,s,i,!1,null,null,null);e["default"]=o.exports}}]);
//# sourceMappingURL=chunk-2d0ba2e8-legacy.780413d0.js.map