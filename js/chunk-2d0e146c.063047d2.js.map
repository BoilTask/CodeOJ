{"version":3,"sources":["webpack:///./src/views/Discuss/Reply/ReplyEdit.vue?79c6","webpack:///src/views/Discuss/Reply/ReplyEdit.vue","webpack:///./src/views/Discuss/Reply/ReplyEdit.vue?eb14","webpack:///./src/views/Discuss/Reply/ReplyEdit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","span","staticStyle","padding","ref","model","formValidate","rules","ruleValidate","label-width","label","prop","placeholder","disabled","value","callback","$$v","$set","expression","type","_v","width","hide-trigger","background-color","staticClass","slot","loading","btnLoading","on","click","$event","handleSubmit","to","$route","params","id","show-header","columns","tableCol","data","replyData","min-height","imgAdd","$imgAdd","save","saveContent","content","staticRenderFns","ReplyEditvue_type_script_lang_js_","name","discuss_id","required","message","trigger","key","mounted","_this","URLSearchParams","$store","state","loginInfo","isLogin","append","user_id","token","axios","get","API_ROOT","reply_id","toString","then","response","reply","temp","Array","push","info","insert_time","update_time","catch","error","console","log","methods","_this2","$Message","length","$Spin","show","post","is_ok","success","hide","_this3","$refs","validate","valid","pos","$file","_this4","uploadToken","formdata","FormData","editor","$img2Url","CDN_ROOT","Reply_ReplyEditvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d0e146c.063047d2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Content',[_c('Row',[_c('Col',{attrs:{\"span\":\"16\"}},[_c('Content',{staticStyle:{\"padding\":\"5px\"}},[_c('Card',[_c('Form',{ref:\"formValidate\",attrs:{\"model\":_vm.formValidate,\"rules\":_vm.ruleValidate,\"label-width\":80}},[_c('FormItem',{attrs:{\"label\":\"讨论ID\",\"prop\":\"discuss_id\"}},[_c('Input',{attrs:{\"placeholder\":\"discuss_id\",\"disabled\":\"\"},model:{value:(_vm.formValidate.discuss_id),callback:function ($$v) {_vm.$set(_vm.formValidate, \"discuss_id\", $$v)},expression:\"formValidate.discuss_id\"}}),_c('p',[_c('Icon',{attrs:{\"type\":\"ios-information-circle-outline\"}}),_vm._v(\"请勿随便更改\\n\\t\\t\\t\\t\\t\\t\")],1)],1)],1)],1)],1)],1),_c('Col',{attrs:{\"span\":\"8\"}},[_c('Sider',{attrs:{\"width\":\"100%\",\"hide-trigger\":\"\"}},[_c('div',{staticStyle:{\"background-color\":\"#f8f8f9\",\"padding\":\"5px\"}},[_c('Card',{staticClass:\"ReplyCard\"},[_c('p',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"新建回复\")]),_c('p',{attrs:{\"slot\":\"extra\"},slot:\"extra\"},[_c('Button',{attrs:{\"type\":\"primary\",\"loading\":_vm.btnLoading},on:{\"click\":function($event){return _vm.handleSubmit('formValidate')}}},[_vm._v(\"提交\")]),_c('Button',{attrs:{\"type\":\"error\",\"to\":'/discuss/'+this.$route.params.id}},[_vm._v(\"查看\")])],1),_c('Table',{attrs:{\"show-header\":false,\"columns\":_vm.tableCol,\"data\":_vm.replyData}})],1)],1)])],1)],1),_c('Card',[_c('mavon-editor',{ref:\"editor\",staticStyle:{\"min-height\":\"600px\"},on:{\"imgAdd\":_vm.$imgAdd,\"save\":_vm.saveContent},model:{value:(_vm.content),callback:function ($$v) {_vm.content=$$v},expression:\"content\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<Content>\r\n\t\t<Row>\r\n\t\t\t<Col span=\"16\">\r\n\t\t\t<Content style=\"padding: 5px;\">\r\n\r\n\t\t\t\t<Card>\r\n\t\t\t\t\t<Form ref=\"formValidate\" :model=\"formValidate\" :rules=\"ruleValidate\" :label-width=\"80\">\r\n\t\t\t\t\t\t<FormItem label=\"讨论ID\" prop=\"discuss_id\">\r\n\t\t\t\t\t\t\t<Input v-model=\"formValidate.discuss_id\" placeholder=\"discuss_id\" disabled></Input>\r\n\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t<Icon type=\"ios-information-circle-outline\" />请勿随便更改\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</Card>\r\n\t\t\t</Content>\r\n\t\t\t</Col>\r\n\t\t\t<Col span=\"8\">\r\n\t\t\t<Sider width=\"100%\" hide-trigger>\r\n\t\t\t\t<div style=\"background-color: #f8f8f9; padding: 5px;\">\r\n\r\n\t\t\t\t\t<Card class=\"ReplyCard\">\r\n\t\t\t\t\t\t<p slot=\"title\">新建回复</p>\r\n\t\t\t\t\t\t<p slot=\"extra\">\r\n\t\t\t\t\t\t\t<Button type=\"primary\" :loading=\"btnLoading\" @click=\"handleSubmit('formValidate')\">提交</Button>\r\n\t\t\t\t\t\t\t<Button type=\"error\" :to=\"'/discuss/'+this.$route.params.id\">查看</Button>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<Table :show-header=\"false\" :columns=\"tableCol\" :data=\"replyData\"></Table>\r\n\t\t\t\t\t</Card>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t</Sider>\r\n\t\t\t</Col>\r\n\t\t</Row>\r\n\t\t<Card>\r\n\t\t\t<mavon-editor ref=\"editor\" @imgAdd=\"$imgAdd\" v-model=\"content\" style=\"min-height: 600px;\" v-on:save=\"saveContent\" />\r\n\t\t</Card>\r\n\t</Content>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tname: 'ReplyEdit',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tbtnLoading: false,\r\n\t\t\t\tformValidate: {\r\n\t\t\t\t\tdiscuss_id: '',\r\n\t\t\t\t},\r\n\t\t\t\truleValidate: {\r\n\t\t\t\t\tdiscuss_id: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '回复ID不能为空！',\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\tcontent: '',\r\n\t\t\t\ttableCol: [{\r\n\t\t\t\t\t\tkey: 'name'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey: 'info'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\treplyData: []\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.formValidate.discuss_id = this.$route.params.id\r\n\t\t\tvar params = new URLSearchParams();\r\n\t\t\tif (this.$store.state.loginInfo.isLogin) {\r\n\t\t\t\tparams.append('user_id', this.$store.state.loginInfo.user_id);\r\n\t\t\t\tparams.append('token', this.$store.state.loginInfo.token);\r\n\t\t\t}\r\n\t\t\taxios\r\n\t\t\t\t.get(this.$store.state.API_ROOT + 'discuss/' + this.$route.params.id+'/reply/'+this.$route.params.reply_id + \"?\" + params.toString())\r\n\t\t\t\t.then(response => {\r\n\t\t\t\r\n\t\t\t\t\tthis.content = response.data.data.reply.content\r\n\t\t\t\t\t// console.log(response.data.data.reply)\r\n\t\t\t\t\tlet temp = Array()\r\n\t\t\t\t\ttemp.push({\r\n\t\t\t\t\t\tname:\"创建时间\",\r\n\t\t\t\t\t\tinfo:response.data.data.reply.insert_time\r\n\t\t\t\t\t})\r\n\t\t\t\t\ttemp.push({\r\n\t\t\t\t\t\tname:\"更新时间\",\r\n\t\t\t\t\t\tinfo:response.data.data.reply.update_time\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.replyData = temp\r\n\t\t\t\t\tthis.btnLoading = false\r\n\t\t\t\t}).catch(function(error) {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t\t\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tsaveContent: function() {\r\n\t\t\t\tif (this.formValidate.discuss_id == '') {\r\n\t\t\t\t\tthis.$Message.error('讨论ID不能为空！');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this.content.length < 1) {\r\n\t\t\t\t\t\tthis.$Message.error('内容不能为空!');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$Spin.show();\r\n\t\t\t\t\t\tvar params = new URLSearchParams();\r\n\t\t\t\t\t\tparams.append('user_id', this.$store.state.loginInfo.user_id);\r\n\t\t\t\t\t\tparams.append('token', this.$store.state.loginInfo.token);\r\n\t\t\t\t\t\tparams.append('content', this.content);\r\n\t\t\t\t\t\tthis.btnLoading = true\r\n\t\t\t\t\t\taxios\r\n\t\t\t\t\t\t\t.post(this.$store.state.API_ROOT + 'discuss/'+this.formValidate.discuss_id+'/reply/'+this.$route.params.reply_id+'/edit=', params)\r\n\t\t\t\t\t\t\t.then(response => {\r\n\t\t\t\t\t\t\t\tif (response.data.data.is_ok) {\r\n\t\t\t\t\t\t\t\t\tthis.$Message.success('保存成功！');\r\n\t\t\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\t\t\tthis.$Message.error('保存失败！');\r\n\t\t\t\t\t\t\t\tthis.btnLoading = false\r\n\t\t\t\t\t\t\t\tthis.$Spin.hide();\r\n\t\t\t\t\t\t\t}).catch(function(error) {\r\n\t\t\t\t\t\t\t\tthis.$Message.error('保存失败！');\r\n\t\t\t\t\t\t\t\tthis.btnLoading = false\r\n\t\t\t\t\t\t\t\tthis.$Spin.hide();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleSubmit(name) {\r\n\t\t\t\tthis.$refs[name].validate((valid) => {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tthis.saveContent();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$Message.error('请检查输入!');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t$imgAdd(pos, $file) {\r\n\t\t\t\tthis.$Spin.show();\r\n\t\t\t\taxios.get(this.$store.state.API_ROOT + 'upload/token')\r\n\t\t\t\t\t.then(response => {\r\n\t\t\t\t\t\tthis.uploadToken = response.data.data.token\r\n\r\n\t\t\t\t\t\tvar params = new URLSearchParams();\r\n\t\t\t\t\t\tparams.append('token', this.uploadToken);\r\n\t\t\t\t\t\tparams.append('file', $file);\r\n\r\n\t\t\t\t\t\tvar formdata = new FormData();\r\n\t\t\t\t\t\tformdata.append('token', this.uploadToken)\r\n\t\t\t\t\t\tformdata.append('file', $file)\r\n\r\n\t\t\t\t\t\taxios\r\n\t\t\t\t\t\t\t.post('https://upload.qiniup.com', formdata)\r\n\t\t\t\t\t\t\t.then(response => {\r\n\t\t\t\t\t\t\t\tthis.$refs.editor.$img2Url(pos, this.$store.state.CDN_ROOT + response.data.key)\r\n\t\t\t\t\t\t\t\tthis.$Spin.hide()\r\n\t\t\t\t\t\t\t\tthis.$Message.success('图片上传成功！')\r\n\t\t\t\t\t\t\t}).catch(function(error) {\r\n\t\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t}).catch(function(error) {\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReplyEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReplyEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ReplyEdit.vue?vue&type=template&id=91873978&\"\nimport script from \"./ReplyEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./ReplyEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}